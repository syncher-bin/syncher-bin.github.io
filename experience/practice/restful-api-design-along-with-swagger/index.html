<!DOCTYPE html>



  


<html class="theme-next mist use-motion" lang="zh-Hans">
<head><meta name="generator" content="Hexo 3.9.0">
  <meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
<script src="//cdn.bootcss.com/pace/1.0.2/pace.min.js"></script>
<link href="//cdn.bootcss.com/pace/1.0.2/themes/pink/pace-theme-flash.css" rel="stylesheet">

<meta name="theme-color" content="#222">









<meta http-equiv="Cache-Control" content="no-transform">
<meta http-equiv="Cache-Control" content="no-siteapp">















  
  
  <link href="/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css">




  
  
  
  

  
    
    
  

  
    
      
    

    
  

  
    
      
    

    
  

  

  
    
      
    

    
  

  
    
    
    <link href="//fonts.googleapis.com/css?family=Monda:300,300italic,400,400italic,700,700italic|Noto Sans SC:300,300italic,400,400italic,700,700italic|Noto Sans SC:300,300italic,400,400italic,700,700italic|PT Mono:300,300italic,400,400italic,700,700italic&subset=latin,latin-ext" rel="stylesheet" type="text/css">
  






<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css">

<link href="/css/main.css?v=5.1.2" rel="stylesheet" type="text/css">


  <meta name="keywords" content="API,Swagger,OpenAPI,">








  <link rel="shortcut icon" type="image/x-icon" href="/favicon.ico?v=5.1.2">






<meta name="description" content="0x00. OpenAPI 简介在之前的文章  一文中，我介绍了如何设计 Restful API。随着前后端的分离以及软件架构的复杂化，你是否也遇到过一下的一个或者多个问题？  API 的设计和实现并非同一个人。无论是在大型互联网架构中还是复杂的软件开发中，API 的设计往往是有架构师、资深工程师、PM 等这些具有丰富经验的角色负责。一旦设计完成，才将具体的开发任务分配给相应的 API 开发工程师">
<meta name="keywords" content="API,Swagger,OpenAPI">
<meta property="og:type" content="article">
<meta property="og:title" content="使用 OpenAPI 设计 RESTful API (一)">
<meta property="og:url" content="https://0x400.com/experience/practice/restful-api-design-along-with-swagger/index.html">
<meta property="og:site_name" content="Pylon&#39;s Blog">
<meta property="og:description" content="0x00. OpenAPI 简介在之前的文章  一文中，我介绍了如何设计 Restful API。随着前后端的分离以及软件架构的复杂化，你是否也遇到过一下的一个或者多个问题？  API 的设计和实现并非同一个人。无论是在大型互联网架构中还是复杂的软件开发中，API 的设计往往是有架构师、资深工程师、PM 等这些具有丰富经验的角色负责。一旦设计完成，才将具体的开发任务分配给相应的 API 开发工程师">
<meta property="og:locale" content="zh-Hans">
<meta property="og:image" content="https://0x400.com/images/2021-01/spec2-vs-spec3.png">
<meta property="og:image" content="https://0x400.com/images/2021-01/spec-v2.png">
<meta property="og:image" content="https://0x400.com/images/2021-01/swagger-intro.png">
<meta property="og:image" content="https://0x400.com/images/2021-01/swagger-tools.png">
<meta property="og:image" content="https://0x400.com/images/2021-01/swagger-editor.png">
<meta property="og:image" content="https://0x400.com/images/2021-01/post-user.png">
<meta property="og:image" content="https://0x400.com/images/2021-01/get-user.png">
<meta property="og:image" content="https://0x400.com/images/2021-01/API-dev-process.png">
<meta property="og:updated_time" content="2021-05-01T10:24:08.568Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="使用 OpenAPI 设计 RESTful API (一)">
<meta name="twitter:description" content="0x00. OpenAPI 简介在之前的文章  一文中，我介绍了如何设计 Restful API。随着前后端的分离以及软件架构的复杂化，你是否也遇到过一下的一个或者多个问题？  API 的设计和实现并非同一个人。无论是在大型互联网架构中还是复杂的软件开发中，API 的设计往往是有架构师、资深工程师、PM 等这些具有丰富经验的角色负责。一旦设计完成，才将具体的开发任务分配给相应的 API 开发工程师">
<meta name="twitter:image" content="https://0x400.com/images/2021-01/spec2-vs-spec3.png">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Mist',
    sidebar: {"position":"left","display":"post","offset":12,"offset_float":12,"b2t":false,"scrollpercent":false,"onmobile":false},
    fancybox: true,
    tabs: true,
    motion: true,
    duoshuo: {
      userId: '0',
      author: '博主'
    },
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>



  <link rel="canonical" href="https://0x400.com/experience/practice/restful-api-design-along-with-swagger/">





  <title>使用 OpenAPI 设计 RESTful API (一) | Pylon's Blog</title>
  





  <script type="text/javascript">
    var _hmt = _hmt || [];
    (function() {
      var hm = document.createElement("script");
      hm.src = "https://hm.baidu.com/hm.js?b7188e764feaf5a9c6e9c033ee3d814b";
      var s = document.getElementsByTagName("script")[0];
      s.parentNode.insertBefore(hm, s);
    })();
  </script>










  <!-- 页面点击小红心 -->
  <script type="text/javascript" src="/js/src/love.js"></script>

</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-Hans">

  
  
    
  

  <div class="container sidebar-position-left page-post-detail ">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/" class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">Pylon's Blog</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
      
        <h1 class="site-subtitle" itemprop="description"></h1>
      
  </div>

  <div class="site-nav-toggle">
    <button>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br>
            
            首页
          </a>
        </li>
      
        
        <li class="menu-item menu-item-categories">
          <a href="/categories" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-th"></i> <br>
            
            分类
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br>
            
            归档
          </a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/tags" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-tags"></i> <br>
            
            标签
          </a>
        </li>
      
        
        <li class="menu-item menu-item-about">
          <a href="/about/?v=k_MmoGDGjJ8" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-user"></i> <br>
            
            关于作者
          </a>
        </li>
      

      
        <li class="menu-item menu-item-search">
          
            <a href="javascript:;" class="popup-trigger">
          
            
              <i class="menu-item-icon fa fa-search fa-fw"></i> <br>
            
            搜索
          </a>
        </li>
      
    </ul>
  

  
    <div class="site-search">
      
  <div class="popup search-popup local-search-popup">
  <div class="local-search-header clearfix">
    <span class="search-icon">
      <i class="fa fa-search"></i>
    </span>
    <span class="popup-btn-close">
      <i class="fa fa-times-circle"></i>
    </span>
    <div class="local-search-input-wrapper">
      <input autocomplete="off" placeholder="搜索..." spellcheck="false" type="text" id="local-search-input">
    </div>
  </div>
  <div id="local-search-result"></div>
</div>



    </div>
  
</nav>



 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            

  <div id="posts" class="posts-expand">
    

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://0x400.com/experience/practice/restful-api-design-along-with-swagger/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Pylon, Syncher">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/images/us.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Pylon's Blog">
    </span>

    
      <header class="post-header">

        
        
          <h2 class="post-title" itemprop="name headline">使用 OpenAPI 设计 RESTful API (一)</h2>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2021-01-18T21:47:30+08:00">
                2021-01-18
              </time>
            

            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/experience/" itemprop="url" rel="index">
                    <span itemprop="name">Experience</span>
                  </a>
                </span>

                
                
                  ， 
                
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/experience/practice/" itemprop="url" rel="index">
                    <span itemprop="name">Practice</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        <h2 id="0x00-OpenAPI-简介"><a href="#0x00-OpenAPI-简介" class="headerlink" title="0x00. OpenAPI 简介"></a>0x00. OpenAPI 简介</h2><p>在之前的文章  一文中，我介绍了如何设计 Restful API。随着前后端的分离以及软件架构的复杂化，你是否也遇到过一下的一个或者多个问题？</p>
<ol>
<li>API 的设计和实现并非同一个人。无论是在大型互联网架构中还是复杂的软件开发中，API 的设计往往是有架构师、资深工程师、PM 等这些具有丰富经验的角色负责。一旦设计完成，才将具体的开发任务分配给相应的 API 开发工程师。</li>
<li>API 也有完整的测试。越是负责的产品中，越需要保证产品的质量，一般而言会有专门的测试团队对 API 进行完整的自动化测试。</li>
<li>前端开发工程师（或者 API 的调用方）和 API 工程师协同开发，因此前端工程师需要 Mock API 以解除对 API 的依赖。</li>
</ol>
<a id="more"></a>
<p>为了解决以上问题中，至少需要保证两点：</p>
<ol>
<li>API 的设计优先。</li>
<li>API 的设计结果需要在架构师、 API 开发工程师、测试工程师和前端工程师中清晰准确的传递。</li>
</ol>
<p>OpenAPI 规范通过定义一种 API 规范旨在解决 API 的设计、开发、消费之间的信息传递问题。</p>
<blockquote>
<p>The <strong>OpenAPI Specification</strong>, originally known as the <strong>Swagger Specification</strong>, is a <a href="https://en.wikipedia.org/wiki/Specification_(technical_standard" target="_blank" rel="noopener">specification</a>) for <a href="https://en.wikipedia.org/wiki/Machine-readable_medium" target="_blank" rel="noopener">machine-readable</a> <a href="https://en.wikipedia.org/wiki/Interface_(computing" target="_blank" rel="noopener">interface</a>) files for describing, producing, consuming, and visualizing <a href="https://en.wikipedia.org/wiki/Representational_state_transfer" target="_blank" rel="noopener">RESTful</a> <a href="https://en.wikipedia.org/wiki/Web_API" target="_blank" rel="noopener">web services</a>.<a href="https://en.wikipedia.org/wiki/OpenAPI_Specification#cite_note-1" target="_blank" rel="noopener">[1]</a> Originally part of the <a href="https://en.wikipedia.org/wiki/Swagger_(software" target="_blank" rel="noopener">Swagger</a>) framework, it became a separate project in 2016, overseen by the OpenAPI Initiative, an open-source collaboration project of the <a href="https://en.wikipedia.org/wiki/Linux_Foundation" target="_blank" rel="noopener">Linux Foundation</a>.<a href="https://en.wikipedia.org/wiki/OpenAPI_Specification#cite_note-charter-2" target="_blank" rel="noopener">[2]</a> Swagger and some other tools can generate code, documentation and test cases given an interface file.</p>
<p>– from Wikipedia</p>
</blockquote>
<p>OpenAPI 规范截止目前共发布了 3 个大版本，目前主要使用的分别是 OpenAPI 3 和 Swagger 2，他们之间跟属性的差别如下：</p>
<p><img src="/images/2021-01/spec2-vs-spec3.png" alt></p>
<p>API 的定义支持 YAML 格式和 JSON 格式。以官方提供的基于 Swagger 2.0 的 <a href="https://petstore.swagger.io/v2/swagger.json" target="_blank" rel="noopener">Petstore</a> API 设计方案为例，</p>
<p><img src="/images/2021-01/spec-v2.png" alt></p>
<p>Swagger 2.0 版本常用的根属性（Fixed Field）有：</p>
<table>
<thead>
<tr>
<th>属性名</th>
<th>取值类型</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>swagger</td>
<td><code>string</code></td>
<td>定义 OpenAPI 规范的版本号， v2 版本取值必须是<code>&quot;2.0&quot;</code>.</td>
</tr>
<tr>
<td>info</td>
<td><a href="https://github.com/OAI/OpenAPI-Specification/blob/main/versions/2.0.md#infoObject" target="_blank" rel="noopener">Info Object</a></td>
<td>API 的元数据信息。包括开发者信息，API 的概述，API 版本和版权等信息。</td>
</tr>
<tr>
<td>host</td>
<td><code>string</code></td>
<td>定义 API 的访问域名。</td>
</tr>
<tr>
<td>basePath</td>
<td><code>string</code></td>
<td>访问 API 时将此值做为 API 的前缀路径。</td>
</tr>
<tr>
<td>schemes</td>
<td>[<code>string</code>]</td>
<td>API 支持的通信协议， 包括 <code>&quot;http&quot;</code>, <code>&quot;https&quot;</code>, <code>&quot;ws&quot;</code>, <code>&quot;wss&quot;</code>  等一种或多种。</td>
</tr>
<tr>
<td>paths</td>
<td>Paths Object</td>
<td>每个 API 的具体定义。 定义中包括 API 的端点（endpoint），参数类型，返回值类型。每个 API 端点的定义中，又以 API 的调用方法分组。</td>
</tr>
<tr>
<td>definitions</td>
<td><a href="https://github.com/OAI/OpenAPI-Specification/blob/main/versions/2.0.md#definitionsObject" target="_blank" rel="noopener">Definitions Object</a></td>
<td>定义一个数据结构，一般将公用的数据模型定义在此处以供 API 的定义直接引用。</td>
</tr>
</tbody>
</table>
<p>更多属性及其定义可以查看官方文档 <a href="https://github.com/OAI/OpenAPI-Specification/blob/main/versions/2.0.md" target="_blank" rel="noopener">OpenAPI V2.0</a>。</p>
<h2 id="0x01-Swagger"><a href="#0x01-Swagger" class="headerlink" title="0x01. Swagger"></a>0x01. Swagger</h2><p>Swagger 是 OpenAPI 的实现，它提供了 API 设计、API 测试、可视化 API 的定义和 Mock API 数据等诸多功能。</p>
<p><img src="/images/2021-01/swagger-intro.png" alt></p>
<p>Swagger 提供了一些开源组件，这些组件都是开源的。Swagger 官方把他们被集成到了 <a href="https://app.swaggerhub.com/" target="_blank" rel="noopener">Swagger Hub</a> 中供我们直接在线上使用，当然我们也可以单独将这些组件部署在我们的开发环境中：</p>
<p><img src="/images/2021-01/swagger-tools.png" alt></p>
<ol>
<li><p><strong>Swagger Codegen</strong></p>
<p>Swagger Codegen 可以将 API 的 OpenAPI 定义翻译成各种格式的接口文档，也可以生成各种编程语言的 SDK 代码。</p>
<blockquote>
<p>Swagger Codegen can simplify your build process by generating server stubs and client SDKs for any API, defined with the OpenAPI (formerly known as Swagger) specification, so your team can focus better on your API’s implementation and adoption.</p>
</blockquote>
</li>
<li><p><strong><a href="https://editor.swagger.io/" target="_blank" rel="noopener">Swagger Editor</a></strong></p>
<p>Swagger Editor 提供在线编辑，设计 API 的功能。</p>
<blockquote>
<p>Design, describe, and document your API on the first open source editor fully dedicated to OpenAPI-based APIs. The Swagger Editor is an easy way to get started with the OpenAPI Specification (formerly known as Swagger), with support for Swagger 2.0 and OpenAPI 3.0.</p>
</blockquote>
</li>
<li><p><strong><a href="https://petstore.swagger.io/" target="_blank" rel="noopener">Swagger UI</a></strong></p>
<p>Swagger UI 将 API 的设计可视化，让 API 的消费者更加容易阅读 API 的定义和使用 API。</p>
<blockquote>
<p>Swagger UI allows anyone — be it your development team or your end consumers — to visualize and interact with the API’s resources without having any of the implementation logic in place. It’s automatically generated from your OpenAPI (formerly known as Swagger) Specification, with the visual documentation making it easy for back end implementation and client side consumption.</p>
</blockquote>
</li>
</ol>
<h2 id="0x02-使用-Swagger-设计-API"><a href="#0x02-使用-Swagger-设计-API" class="headerlink" title="0x02. 使用 Swagger 设计 API"></a>0x02. 使用 Swagger 设计 API</h2><h3 id="2-0-初识-Swagger-Editor"><a href="#2-0-初识-Swagger-Editor" class="headerlink" title="2.0 初识 Swagger Editor"></a>2.0 初识 Swagger Editor</h3><p>使用 Swagger 设计 API，首先要打开  <a href="https://app.swaggerhub.com/" target="_blank" rel="noopener">Swagger Hub</a> 或者 <a href="https://editor.swagger.io/" target="_blank" rel="noopener">Swagger Editor</a>。打开 Swagger Editor 后，默认会载入 Petstore 的 API 定义，</p>
<p><img src="/images/2021-01/swagger-editor.png" alt></p>
<p>其中 Swagger Editor 集成了 Swagger UI，如右侧所示。左侧的区域 1 为 API 定义代码编辑器，右侧区域 2 为 API 的描述信息展示区，右侧区域 3 为 API 的定义可视化区，右侧区域 4 则为 API 引用的数据模型定义的可视化区。</p>
<p>在区域 2 中点击具体的某个 API，以 <code>POST /user</code> 为例，可以看到更多的 API 定义信息,</p>
<p><img src="/images/2021-01/post-user.png" alt></p>
<h3 id="2-1-设计-GET-user-接口"><a href="#2-1-设计-GET-user-接口" class="headerlink" title="2.1 设计 GET /user 接口"></a>2.1 设计 GET /user 接口</h3><p>设计一个 <code>GET /user</code> 的接口用于返回用户列表，在 <code>/user</code> 下添加 get 方法，并有如下定义：</p>
<figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">/user:</span></span><br><span class="line"><span class="attr">  get:</span></span><br><span class="line"><span class="attr">    tags:</span></span><br><span class="line"><span class="bullet">    -</span> <span class="string">"user"</span></span><br><span class="line"><span class="attr">    summary:</span> <span class="string">"Get users with filltering"</span></span><br><span class="line"><span class="attr">    operationId:</span> <span class="string">"getUser"</span></span><br><span class="line"><span class="attr">    consumes:</span></span><br><span class="line"><span class="bullet">    -</span> <span class="string">"application/json"</span></span><br><span class="line"><span class="attr">    produces:</span></span><br><span class="line"><span class="bullet">    -</span> <span class="string">"application/json"</span></span><br><span class="line"><span class="attr">    responses:</span></span><br><span class="line">      <span class="number">200</span><span class="string">:</span></span><br><span class="line"><span class="attr">        description:</span> <span class="string">"successful operation"</span></span><br><span class="line"><span class="attr">        schema:</span></span><br><span class="line"><span class="attr">          type:</span> <span class="string">"array"</span></span><br><span class="line"><span class="attr">          items:</span></span><br><span class="line">            <span class="string">$ref:</span> <span class="string">"#/definitions/User"</span></span><br><span class="line">      <span class="number">400</span><span class="string">:</span></span><br><span class="line"><span class="attr">        description:</span> <span class="string">"Invalid query parameters"</span></span><br></pre></td></tr></table></figure>
<p>可视化的 <code>GET /user</code> 接口如下：</p>
<p><img src="/images/2021-01/get-user.png" alt></p>
<h3 id="2-3-添加过滤参数"><a href="#2-3-添加过滤参数" class="headerlink" title="2.3 添加过滤参数"></a>2.3 添加过滤参数</h3><p>为了让 <code>GET /user</code> 接口支持分页查询，我们需要定义两个过滤参数 skip 和 limit。这两个参数是携带在请求的 URL 中的，因此我们需要为 GET 请求添加如下的查询参数定义：</p>
<figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">parameters:</span></span><br><span class="line"><span class="attr">- in:</span> <span class="string">"query"</span></span><br><span class="line"><span class="attr">  name:</span> <span class="string">"skip"</span></span><br><span class="line"><span class="attr">  type:</span> <span class="string">"integer"</span></span><br><span class="line"><span class="attr">  description:</span> <span class="string">"Skip number of users"</span></span><br><span class="line"><span class="attr">- in:</span> <span class="string">"query"</span></span><br><span class="line"><span class="attr">  name:</span> <span class="string">"limit"</span></span><br><span class="line"><span class="attr">  type:</span> <span class="string">"integer"</span></span><br><span class="line"><span class="attr">  description:</span> <span class="string">"Limit number of users"</span></span><br></pre></td></tr></table></figure>
<p>其中 <code>in: &quot;query&quot;</code> 表示该参数位于请求的 URL 中，除此之外，参数还可以携带在请求的头部或者实体中，分别取值 <code>in: &quot;header&quot;</code> 和 <code>in: &quot;body&quot;</code>。</p>
<p>至此，我们就完成了一个 API 的设计。我们只需要将 API 的设计描述文件发送给各个角色的人员，大家行可以围绕着下如下开发流程进行并行开发。</p>
<p><img src="/images/2021-01/API-dev-process.png" alt></p>
<p>综上所述，本文主要介绍了基于 OpenAPI 协议和 Swagger 工具的 API 设计和开发。后续将以 NodeJS 为例，介绍 Swagger 如何集成到 API 的开发环境中，以及它是如何为 API 开发保驾护航的，敬请期待。</p>

      
    </div>
    
    
    

    <div>
    
    
<div class="my_post_copyright">
<script src="//cdn.bootcss.com/clipboard.js/1.5.10/clipboard.min.js"></script>
<!-- JS库 sweetalert 可修改路径 -->
<script type="text/javascript" src="http://jslibs.wuxubj.cn/sweetalert_mini/jquery-1.7.1.min.js"></script>
<script src="http://jslibs.wuxubj.cn/sweetalert_mini/sweetalert.min.js"></script>
<link rel="stylesheet" type="text/css" href="http://jslibs.wuxubj.cn/sweetalert_mini/sweetalert.mini.css">
<p><span>本文标题:</span><a href="/experience/practice/restful-api-design-along-with-swagger/">使用 OpenAPI 设计 RESTful API (一)</a></p>
<p><span>文章作者:</span><a href="/" title="访问 Pylon, Syncher 的个人博客">Pylon, Syncher</a></p>
<p><span>发布时间:</span>2021年01月18日 - 21:01</p>
<p><span>最后更新:</span>2021年05月01日 - 18:05</p>
<p><span>原始链接:</span><a href="/experience/practice/restful-api-design-along-with-swagger/" title="使用 OpenAPI 设计 RESTful API (一)">https://0x400.com/experience/practice/restful-api-design-along-with-swagger/</a>
<span class="copy-path" title="点击复制文章链接"><i class="fa fa-clipboard" data-clipboard-text="https://0x400.com/experience/practice/restful-api-design-along-with-swagger/" aria-label="复制成功！"></i></span>
</p>
<p><span>许可协议:</span><i class="fa fa-creative-commons"></i> <a rel="license" href="https://creativecommons.org/licenses/by-nc-nd/4.0/" target="_blank" title="Attribution-NonCommercial-NoDerivatives 4.0 International (CC BY-NC-ND 4.0)">署名-非商业性使用-禁止演绎 4.0 国际</a> 转载请保留原文链接及作者。</p>  
</div>
<script> 
var clipboard = new Clipboard('.fa-clipboard');
clipboard.on('success', $(function(){
    $(".fa-clipboard").click(function(){
        swal({   
            title: "",   
            text: '复制成功',   
            html: false,
            timer: 500,   
            showConfirmButton: false
        });

    });

}));  
</script>


    
    </div>

    

    

    

    <footer class="post-footer">
      
        <div class="post-tags">
          
            <a href="/tags/api/" rel="tag"><i class="fa fa-tag"></i> API</a>
          
            <a href="/tags/swagger/" rel="tag"><i class="fa fa-tag"></i> Swagger</a>
          
            <a href="/tags/openapi/" rel="tag"><i class="fa fa-tag"></i> OpenAPI</a>
          
        </div>
      

      
      
      

      
        <div class="post-nav">
          <div class="post-nav-next post-nav-item">
            
              <a href="/experience/debugging/dev-show-less-is-not-disappearing-debugging/" rel="next" title="一按钮不正常显示的 Debug 记录">
                <i class="fa fa-chevron-left"></i> 一按钮不正常显示的 Debug 记录
              </a>
            
          </div>

          <span class="post-nav-divider"></span>

          <div class="post-nav-prev post-nav-item">
            
          </div>
        </div>
      

      
      
    </footer>
  </div>
  
  
  
  </article>



    <div class="post-spread">
      
    </div>
  </div>


          </div>
          


          
  <div class="comments" id="comments">
    
  </div>


        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    
    <div class="sidebar-inner">

      

      
        <ul class="sidebar-nav motion-element">
          <li class="sidebar-nav-toc sidebar-nav-active" data-target="post-toc-wrap">
            文章目录
          </li>
          <li class="sidebar-nav-overview" data-target="site-overview">
            站点概览
          </li>
        </ul>
      

      <section class="site-overview sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <img class="site-author-image" itemprop="image" src="/images/us.jpg" alt="Pylon, Syncher">
          <p class="site-author-name" itemprop="name">Pylon, Syncher</p>
           
              <p class="site-description motion-element" itemprop="description"></p>
           
        </div>
        <nav class="site-state motion-element">

          
            <div class="site-state-item site-state-posts">
              <a href="/archives">
                <span class="site-state-item-count">76</span>
                <span class="site-state-item-name">日志</span>
              </a>
            </div>
          

          
            
            
            <div class="site-state-item site-state-categories">
              <a href="/categories/index.html">
                <span class="site-state-item-count">46</span>
                <span class="site-state-item-name">分类</span>
              </a>
            </div>
          

          
            
            
            <div class="site-state-item site-state-tags">
              <a href="/tags/index.html">
                <span class="site-state-item-count">77</span>
                <span class="site-state-item-name">标签</span>
              </a>
            </div>
          

        </nav>

        

        <div class="links-of-author motion-element">
          
            
              <span class="links-of-author-item">
                <a href="https://github.com/brelain" target="_blank" title="GitHub">
                  
                    <i class="fa fa-fw fa-github"></i>
                  
                    
                      GitHub
                    
                </a>
              </span>
            
              <span class="links-of-author-item">
                <a href="mailto:syncviip@gmail.com" target="_blank" title="GMail">
                  
                    <i class="fa fa-fw fa-envelope"></i>
                  
                    
                      GMail
                    
                </a>
              </span>
            
              <span class="links-of-author-item">
                <a href="https://leetcode.com/syncviip" target="_blank" title="LeetCode">
                  
                    <i class="fa fa-fw fa-globe"></i>
                  
                    
                      LeetCode
                    
                </a>
              </span>
            
          
        </div>

        
        

        
        
          <div class="links-of-blogroll motion-element links-of-blogroll-inline">
            <div class="links-of-blogroll-title">
              <i class="fa  fa-fw fa-globe"></i>
              友情链接
            </div>
            <ul class="links-of-blogroll-list">
              
                <li class="links-of-blogroll-item">
                  <a href="https://dyoung.unnnnn.com/" title="东阳兄" target="_blank">东阳兄</a>
                </li>
              
            </ul>
          </div>
        

        


      </section>

      
      <!--noindex-->
        <section class="post-toc-wrap motion-element sidebar-panel sidebar-panel-active">
          <div class="post-toc">

            
              
            

            
              <div class="post-toc-content"><ol class="nav"><li class="nav-item nav-level-2"><a class="nav-link" href="#0x00-OpenAPI-简介"><span class="nav-number">1.</span> <span class="nav-text">0x00. OpenAPI 简介</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#0x01-Swagger"><span class="nav-number">2.</span> <span class="nav-text">0x01. Swagger</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#0x02-使用-Swagger-设计-API"><span class="nav-number">3.</span> <span class="nav-text">0x02. 使用 Swagger 设计 API</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#2-0-初识-Swagger-Editor"><span class="nav-number">3.1.</span> <span class="nav-text">2.0 初识 Swagger Editor</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#2-1-设计-GET-user-接口"><span class="nav-number">3.2.</span> <span class="nav-text">2.1 设计 GET /user 接口</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#2-3-添加过滤参数"><span class="nav-number">3.3.</span> <span class="nav-text">2.3 添加过滤参数</span></a></li></ol></li></ol></div>
            

          </div>
        </section>
      <!--/noindex-->
      

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright">
  
  &copy; 
  <span itemprop="copyrightYear">2021</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Pylon, Syncher</span>
</div>


<div class="powered-by">
  由 <a class="theme-link" href="https://hexo.io">Hexo</a> 强力驱动
</div>

<div class="powered-by">
 Hosted by <a href="#" style="font-weight: bold">GitHub && Coding.net</a>
</div>

<div class="theme-info">
  主题 -
  <a class="theme-link" href="https://github.com/iissnan/hexo-theme-next">
    NexT.Mist
  </a>
</div>



  <script src="https://unpkg.com/mermaid@7.1.2/dist/mermaid.min.js"></script>
  <script>
    if (window.mermaid) {
      mermaid.initialize({theme: 'forest'});
    }
  </script>

        

        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  












  
  <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>

  
  <script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>

  
  <script type="text/javascript" src="/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>

  
  <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.1.2"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.1.2"></script>



  
  

  
  <script type="text/javascript" src="/js/src/scrollspy.js?v=5.1.2"></script>
<script type="text/javascript" src="/js/src/post-details.js?v=5.1.2"></script>



  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.1.2"></script>



  


  




	





  





  






  

  <script type="text/javascript">
    // Popup Window;
    var isfetched = false;
    var isXml = true;
    // Search DB path;
    var search_path = "search.xml";
    if (search_path.length === 0) {
      search_path = "search.xml";
    } else if (/json$/i.test(search_path)) {
      isXml = false;
    }
    var path = "/" + search_path;
    // monitor main search box;

    var onPopupClose = function (e) {
      $('.popup').hide();
      $('#local-search-input').val('');
      $('.search-result-list').remove();
      $('#no-result').remove();
      $(".local-search-pop-overlay").remove();
      $('body').css('overflow', '');
    }

    function proceedsearch() {
      $("body")
        .append('<div class="search-popup-overlay local-search-pop-overlay"></div>')
        .css('overflow', 'hidden');
      $('.search-popup-overlay').click(onPopupClose);
      $('.popup').toggle();
      var $localSearchInput = $('#local-search-input');
      $localSearchInput.attr("autocapitalize", "none");
      $localSearchInput.attr("autocorrect", "off");
      $localSearchInput.focus();
    }

    // search function;
    var searchFunc = function(path, search_id, content_id) {
      'use strict';

      // start loading animation
      $("body")
        .append('<div class="search-popup-overlay local-search-pop-overlay">' +
          '<div id="search-loading-icon">' +
          '<i class="fa fa-spinner fa-pulse fa-5x fa-fw"></i>' +
          '</div>' +
          '</div>')
        .css('overflow', 'hidden');
      $("#search-loading-icon").css('margin', '20% auto 0 auto').css('text-align', 'center');

      $.ajax({
        url: path,
        dataType: isXml ? "xml" : "json",
        async: true,
        success: function(res) {
          // get the contents from search data
          isfetched = true;
          $('.popup').detach().appendTo('.header-inner');
          var datas = isXml ? $("entry", res).map(function() {
            return {
              title: $("title", this).text(),
              content: $("content",this).text(),
              url: $("url" , this).text()
            };
          }).get() : res;
          var input = document.getElementById(search_id);
          var resultContent = document.getElementById(content_id);
          var inputEventFunction = function() {
            var searchText = input.value.trim().toLowerCase();
            var keywords = searchText.split(/[\s\-]+/);
            if (keywords.length > 1) {
              keywords.push(searchText);
            }
            var resultItems = [];
            if (searchText.length > 0) {
              // perform local searching
              datas.forEach(function(data) {
                var isMatch = false;
                var hitCount = 0;
                var searchTextCount = 0;
                var title = data.title.trim();
                var titleInLowerCase = title.toLowerCase();
                var content = data.content.trim().replace(/<[^>]+>/g,"");
                var contentInLowerCase = content.toLowerCase();
                var articleUrl = decodeURIComponent(data.url);
                var indexOfTitle = [];
                var indexOfContent = [];
                // only match articles with not empty titles
                if(title != '') {
                  keywords.forEach(function(keyword) {
                    function getIndexByWord(word, text, caseSensitive) {
                      var wordLen = word.length;
                      if (wordLen === 0) {
                        return [];
                      }
                      var startPosition = 0, position = [], index = [];
                      if (!caseSensitive) {
                        text = text.toLowerCase();
                        word = word.toLowerCase();
                      }
                      while ((position = text.indexOf(word, startPosition)) > -1) {
                        index.push({position: position, word: word});
                        startPosition = position + wordLen;
                      }
                      return index;
                    }

                    indexOfTitle = indexOfTitle.concat(getIndexByWord(keyword, titleInLowerCase, false));
                    indexOfContent = indexOfContent.concat(getIndexByWord(keyword, contentInLowerCase, false));
                  });
                  if (indexOfTitle.length > 0 || indexOfContent.length > 0) {
                    isMatch = true;
                    hitCount = indexOfTitle.length + indexOfContent.length;
                  }
                }

                // show search results

                if (isMatch) {
                  // sort index by position of keyword

                  [indexOfTitle, indexOfContent].forEach(function (index) {
                    index.sort(function (itemLeft, itemRight) {
                      if (itemRight.position !== itemLeft.position) {
                        return itemRight.position - itemLeft.position;
                      } else {
                        return itemLeft.word.length - itemRight.word.length;
                      }
                    });
                  });

                  // merge hits into slices

                  function mergeIntoSlice(text, start, end, index) {
                    var item = index[index.length - 1];
                    var position = item.position;
                    var word = item.word;
                    var hits = [];
                    var searchTextCountInSlice = 0;
                    while (position + word.length <= end && index.length != 0) {
                      if (word === searchText) {
                        searchTextCountInSlice++;
                      }
                      hits.push({position: position, length: word.length});
                      var wordEnd = position + word.length;

                      // move to next position of hit

                      index.pop();
                      while (index.length != 0) {
                        item = index[index.length - 1];
                        position = item.position;
                        word = item.word;
                        if (wordEnd > position) {
                          index.pop();
                        } else {
                          break;
                        }
                      }
                    }
                    searchTextCount += searchTextCountInSlice;
                    return {
                      hits: hits,
                      start: start,
                      end: end,
                      searchTextCount: searchTextCountInSlice
                    };
                  }

                  var slicesOfTitle = [];
                  if (indexOfTitle.length != 0) {
                    slicesOfTitle.push(mergeIntoSlice(title, 0, title.length, indexOfTitle));
                  }

                  var slicesOfContent = [];
                  while (indexOfContent.length != 0) {
                    var item = indexOfContent[indexOfContent.length - 1];
                    var position = item.position;
                    var word = item.word;
                    // cut out 100 characters
                    var start = position - 20;
                    var end = position + 80;
                    if(start < 0){
                      start = 0;
                    }
                    if (end < position + word.length) {
                      end = position + word.length;
                    }
                    if(end > content.length){
                      end = content.length;
                    }
                    slicesOfContent.push(mergeIntoSlice(content, start, end, indexOfContent));
                  }

                  // sort slices in content by search text's count and hits' count

                  slicesOfContent.sort(function (sliceLeft, sliceRight) {
                    if (sliceLeft.searchTextCount !== sliceRight.searchTextCount) {
                      return sliceRight.searchTextCount - sliceLeft.searchTextCount;
                    } else if (sliceLeft.hits.length !== sliceRight.hits.length) {
                      return sliceRight.hits.length - sliceLeft.hits.length;
                    } else {
                      return sliceLeft.start - sliceRight.start;
                    }
                  });

                  // select top N slices in content

                  var upperBound = parseInt('1');
                  if (upperBound >= 0) {
                    slicesOfContent = slicesOfContent.slice(0, upperBound);
                  }

                  // highlight title and content

                  function highlightKeyword(text, slice) {
                    var result = '';
                    var prevEnd = slice.start;
                    slice.hits.forEach(function (hit) {
                      result += text.substring(prevEnd, hit.position);
                      var end = hit.position + hit.length;
                      result += '<b class="search-keyword">' + text.substring(hit.position, end) + '</b>';
                      prevEnd = end;
                    });
                    result += text.substring(prevEnd, slice.end);
                    return result;
                  }

                  var resultItem = '';

                  if (slicesOfTitle.length != 0) {
                    resultItem += "<li><a href='" + articleUrl + "' class='search-result-title'>" + highlightKeyword(title, slicesOfTitle[0]) + "</a>";
                  } else {
                    resultItem += "<li><a href='" + articleUrl + "' class='search-result-title'>" + title + "</a>";
                  }

                  slicesOfContent.forEach(function (slice) {
                    resultItem += "<a href='" + articleUrl + "'>" +
                      "<p class=\"search-result\">" + highlightKeyword(content, slice) +
                      "...</p>" + "</a>";
                  });

                  resultItem += "</li>";
                  resultItems.push({
                    item: resultItem,
                    searchTextCount: searchTextCount,
                    hitCount: hitCount,
                    id: resultItems.length
                  });
                }
              })
            };
            if (keywords.length === 1 && keywords[0] === "") {
              resultContent.innerHTML = '<div id="no-result"><i class="fa fa-search fa-5x" /></div>'
            } else if (resultItems.length === 0) {
              resultContent.innerHTML = '<div id="no-result"><i class="fa fa-frown-o fa-5x" /></div>'
            } else {
              resultItems.sort(function (resultLeft, resultRight) {
                if (resultLeft.searchTextCount !== resultRight.searchTextCount) {
                  return resultRight.searchTextCount - resultLeft.searchTextCount;
                } else if (resultLeft.hitCount !== resultRight.hitCount) {
                  return resultRight.hitCount - resultLeft.hitCount;
                } else {
                  return resultRight.id - resultLeft.id;
                }
              });
              var searchResultList = '<ul class=\"search-result-list\">';
              resultItems.forEach(function (result) {
                searchResultList += result.item;
              })
              searchResultList += "</ul>";
              resultContent.innerHTML = searchResultList;
            }
          }

          if ('auto' === 'auto') {
            input.addEventListener('input', inputEventFunction);
          } else {
            $('.search-icon').click(inputEventFunction);
            input.addEventListener('keypress', function (event) {
              if (event.keyCode === 13) {
                inputEventFunction();
              }
            });
          }

          // remove loading animation
          $(".local-search-pop-overlay").remove();
          $('body').css('overflow', '');

          proceedsearch();
        }
      });
    }

    // handle and trigger popup window;
    $('.popup-trigger').click(function(e) {
      e.stopPropagation();
      if (isfetched === false) {
        searchFunc(path, 'local-search-input', 'local-search-result');
      } else {
        proceedsearch();
      };
    });

    $('.popup-btn-close').click(onPopupClose);
    $('.popup').click(function(e){
      e.stopPropagation();
    });
    $(document).on('keyup', function (event) {
      var shouldDismissSearchPopup = event.which === 27 &&
        $('.search-popup').is(':visible');
      if (shouldDismissSearchPopup) {
        onPopupClose();
      }
    });
  </script>





  

  

  

  
  
    <script type="text/x-mathjax-config">
      MathJax.Hub.Config({
        tex2jax: {
          inlineMath: [ ['$','$'], ["\\(","\\)"]  ],
          processEscapes: true,
          skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code']
        }
      });
    </script>

    <script type="text/x-mathjax-config">
      MathJax.Hub.Queue(function() {
        var all = MathJax.Hub.getAllJax(), i;
        for (i=0; i < all.length; i += 1) {
          all[i].SourceElement().parentNode.className += ' has-jax';
        }
      });
    </script>
    <script type="text/javascript" src="//cdn.bootcss.com/mathjax/2.7.1/latest.js?config=TeX-AMS-MML_HTMLorMML"></script>
  


  

  

</body>
  <!-- 背景动画 -->
  <script type="text/javascript" src="/js/src/particle.js"></script>
</html>
